# üåç –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ Metasiberia

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
Metasiberia –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Qt Translation System. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —è–∑—ã–∫–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

```
substrata/
‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îî‚îÄ‚îÄ translations/
‚îÇ       ‚îú‚îÄ‚îÄ metasiberia_ru.ts     # –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –ø–µ—Ä–µ–≤–æ–¥–∞ (—Ä—É—Å—Å–∫–∏–π)
‚îÇ       ‚îî‚îÄ‚îÄ metasiberia_ru.qm     # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –ø–µ—Ä–µ–≤–æ–¥–∞
‚îî‚îÄ‚îÄ gui_client/
    ‚îú‚îÄ‚îÄ MainWindow.h              # –û–±—ä—è–≤–ª–µ–Ω–∏—è –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
    ‚îî‚îÄ‚îÄ MainWindow.cpp            # –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤
```

## üîß –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —è–∑—ã–∫

### **1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ (.ts)**

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª:**
```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø–µ—Ä–µ–≤–æ–¥–æ–≤
cd C:\programming\substrata\resources\translations

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Å—Å–∫–∏–π —Ñ–∞–π–ª –∫–∞–∫ –æ—Å–Ω–æ–≤—É
copy metasiberia_ru.ts metasiberia_es.ts  # –î–ª—è –∏—Å–ø–∞–Ω—Å–∫–æ–≥–æ
copy metasiberia_ru.ts metasiberia_de.ts  # –î–ª—è –Ω–µ–º–µ—Ü–∫–æ–≥–æ
copy metasiberia_ru.ts metasiberia_fr.ts  # –î–ª—è —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–≥–æ
```

### **2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–≤–æ–¥–∞**

**–û—Ç–∫—Ä–æ–π—Ç–µ .ts —Ñ–∞–π–ª –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ –Ω–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏–∏:**

```xml
<context>
    <name>MainWindow</name>
    <message>
        <source>Language</source>
        <translation>–Ø–∑—ã–∫</translation>
    </message>
    <message>
        <source>English</source>
        <translation>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</translation>
    </message>
    <message>
        <source>–†—É—Å—Å–∫–∏–π</source>
        <translation>–†—É—Å—Å–∫–∏–π</translation>
    </message>
</context>
```

**–ó–∞–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –Ω—É–∂–Ω—ã–π —è–∑—ã–∫:**
```xml
<!-- –î–ª—è –∏—Å–ø–∞–Ω—Å–∫–æ–≥–æ (es) -->
<translation>Idioma</translation>        <!-- Language -->
<translation>Ingl√©s</translation>        <!-- English -->
<translation>Espa√±ol</translation>       <!-- Spanish -->
```

### **3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –≤ –∫–æ–¥**

**–í —Ñ–∞–π–ª–µ `MainWindow.cpp` –Ω–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –º–µ–Ω—é:**

```cpp
// –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —è–∑—ã–∫ –≤ –º–µ–Ω—é
action_lang_es = language_menu->addAction(tr("Espa√±ol"));
action_lang_es->setCheckable(true);
action_lang_es->setData(QString("es"));
language_action_group->addAction(action_lang_es);
```

**–í —Ñ–∞–π–ª–µ `MainWindow.h` –¥–æ–±–∞–≤—å—Ç–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ:**
```cpp
QAction* action_lang_es = nullptr;  // –î–ª—è –∏—Å–ø–∞–Ω—Å–∫–æ–≥–æ
```

### **4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏**

**–í `MainWindow.cpp` –Ω–∞–π–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤:**

```cpp
connect(language_action_group, &QActionGroup::triggered, this, [this](QAction* a){
    const QString lang = a->data().toString();
    qApp->removeTranslator(&app_translator);
    bool installed = false;
    
    if(lang == "ru") {
        // –†—É—Å—Å–∫–∏–π
        QString qm_path = QString::fromStdString(base_dir_path) + "/data/resources/translations/metasiberia_ru.qm";
        if(QFile::exists(qm_path)) {
            installed = app_translator.load(qm_path);
            if(installed) qApp->installTranslator(&app_translator);
        }
    }
    else if(lang == "es") {  // –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û
        // –ò—Å–ø–∞–Ω—Å–∫–∏–π
        QString qm_path = QString::fromStdString(base_dir_path) + "/data/resources/translations/metasiberia_es.qm";
        if(QFile::exists(qm_path)) {
            installed = app_translator.load(qm_path);
            if(installed) qApp->installTranslator(&app_translator);
        }
    }
    // –î–ª—è English, –º—ã –ø—Ä–æ—Å—Ç–æ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫
    
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–±–æ—Ä —è–∑—ã–∫–∞
    if(settings) settings->setValue("mainwindow/language", lang);
    
    // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    ui->retranslateUi(this);
});
```

### **5. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞**

**–î–æ–±–∞–≤—å—Ç–µ –≤ `build_metasiberia.bat` –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞:**

```batch
REM –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ metasiberia_ru.qm
if defined LRELEASE (
    echo –ì–µ–Ω–µ—Ä–∞—Ü–∏—è metasiberia_es.qm...
    "%LRELEASE%" -silent "C:\programming\substrata\resources\translations\metasiberia_es.ts" -qm "%EXE_DIR%\translations\metasiberia_es.qm"
)
```

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### **Qt Linguist (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Qt Linguist
C:\programming\Qt\5.15.16-vs2022-64\bin\linguist.exe
```

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `.ts` —Ñ–∞–π–ª –≤ Qt Linguist
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞
3. –í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ –≤ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª

### **–†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ `.ts` —Ñ–∞–π–ª –≤ –ª—é–±–æ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- –ù–∞–π–¥–∏—Ç–µ —Ç–µ–≥–∏ `<translation>` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### **1. –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è .ts —Ñ–∞–π–ª–∞:**
```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
C:\programming\Metasiberia_Build_System\build_metasiberia.bat
```

### **2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç
C:\programming\Metasiberia_Build_System\run_gui_client.bat
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### **–†—É—Å—Å–∫–∏–π (ru):**
```xml
<source>Language</source>
<translation>–Ø–∑—ã–∫</translation>

<source>English</source>
<translation>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</translation>

<source>–†—É—Å—Å–∫–∏–π</source>
<translation>–†—É—Å—Å–∫–∏–π</translation>
```

### **–ò—Å–ø–∞–Ω—Å–∫–∏–π (es):**
```xml
<source>Language</source>
<translation>Idioma</translation>

<source>English</source>
<translation>Ingl√©s</translation>

<source>–†—É—Å—Å–∫–∏–π</source>
<translation>Espa√±ol</translation>
```

### **–ù–µ–º–µ—Ü–∫–∏–π (de):**
```xml
<source>Language</source>
<translation>Sprache</translation>

<source>English</source>
<translation>Englisch</translation>

<source>–†—É—Å—Å–∫–∏–π</source>
<translation>Deutsch</translation>
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –ø–µ—Ä–µ–≤–æ–¥—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏** .ts —Ñ–∞–π–ª–æ–≤
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ UTF-8** –∫–æ–¥–∏—Ä–æ–≤–∫—É –¥–ª—è —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–ª–∏–Ω—É** –ø–µ—Ä–µ–≤–æ–¥–æ–≤ - –æ–Ω–∏ –º–æ–≥—É—Ç –Ω–µ –ø–æ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## üéØ –ì–æ—Ç–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã

**–¢–µ–∫—É—â–∏–µ —è–∑—ã–∫–∏:**
- ‚úÖ **English** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚úÖ **–†—É—Å—Å–∫–∏–π** (metasiberia_ru.qm)

**–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- üá™üá∏ **Espa√±ol** (–∏—Å–ø–∞–Ω—Å–∫–∏–π)
- üá©üá™ **Deutsch** (–Ω–µ–º–µ—Ü–∫–∏–π)  
- üá´üá∑ **Fran√ßais** (—Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π)
- üá®üá≥ **‰∏≠Êñá** (–∫–∏—Ç–∞–π—Å–∫–∏–π)
- üáØüáµ **Êó•Êú¨Ë™û** (—è–ø–æ–Ω—Å–∫–∏–π)

---

**–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ Metasiberia –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!** üéâ
